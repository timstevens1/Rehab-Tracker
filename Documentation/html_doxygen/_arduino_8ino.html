<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RehabTracker: /Users/chun/Documents/2018Spring/Rehab-Tracker/Hardware/Arduino/Arduino.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RehabTracker
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6cc751a9e685a986d41d35de353de328.html">Hardware</a></li><li class="navelem"><a class="el" href="dir_cd7e1643b13ae7e093711e356fbfb157.html">Arduino</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Arduino.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The code for the Blend Arduino that will be uploaded to the board on the NMES machine.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;EEPROMex.h&gt;</code><br />
<code>#include &lt;SPI.h&gt;</code><br />
<code>#include &lt;lib_aci.h&gt;</code><br />
<code>#include &lt;aci_setup.h&gt;</code><br />
<code>#include &lt;RBL_nRF8001.h&gt;</code><br />
<code>#include &lt;RBL_services.h&gt;</code><br />
<code>#include &lt;Wire.h&gt;</code><br />
<code>#include &quot;RTClib.h&quot;</code><br />
</div>
<p><a href="_arduino_8ino_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a25a40b6614565f755233080a384c35f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a25a40b6614565f755233080a384c35f1">initialize</a> ()</td></tr>
<tr class="memdesc:a25a40b6614565f755233080a384c35f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize all global variables related to a session.  <a href="#a25a40b6614565f755233080a384c35f1">More...</a><br /></td></tr>
<tr class="separator:a25a40b6614565f755233080a384c35f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52573902bb826815aa77a3d47254c860"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a52573902bb826815aa77a3d47254c860">ButtonInterrupt</a> ()</td></tr>
<tr class="memdesc:a52573902bb826815aa77a3d47254c860"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if BLE is connected.  <a href="#a52573902bb826815aa77a3d47254c860">More...</a><br /></td></tr>
<tr class="separator:a52573902bb826815aa77a3d47254c860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae938d2541a15a3cec4e6c47b92795112"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#ae938d2541a15a3cec4e6c47b92795112">WriteStorage</a> ()</td></tr>
<tr class="memdesc:ae938d2541a15a3cec4e6c47b92795112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to EEPROM.  <a href="#ae938d2541a15a3cec4e6c47b92795112">More...</a><br /></td></tr>
<tr class="separator:ae938d2541a15a3cec4e6c47b92795112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6f602edd594562f9cb1605df25d53f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a1c6f602edd594562f9cb1605df25d53f">ArrayAdd</a> (float intensityValue, int channel)</td></tr>
<tr class="memdesc:a1c6f602edd594562f9cb1605df25d53f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sum up all intensities, calculate the average intensity, and calculate the session compliance.  <a href="#a1c6f602edd594562f9cb1605df25d53f">More...</a><br /></td></tr>
<tr class="separator:a1c6f602edd594562f9cb1605df25d53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a992780a393bb17ed9c6f96a1822808fa"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a992780a393bb17ed9c6f96a1822808fa">IntensityMap</a> (int sensorValue)</td></tr>
<tr class="memdesc:a992780a393bb17ed9c6f96a1822808fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the intensity based on the sensor value and return the intensity.  <a href="#a992780a393bb17ed9c6f96a1822808fa">More...</a><br /></td></tr>
<tr class="separator:a992780a393bb17ed9c6f96a1822808fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize and set the initial values.  <a href="#a4fc01d736fe50cf5b977f755b675f11d">More...</a><br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop consecutively, allowing the program to change and respond.  <a href="#afe461d27b9c48d5921c00d521181f12f">More...</a><br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a752007f4f4b1f240f9c0877fb1999e7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a752007f4f4b1f240f9c0877fb1999e7e">outputtingToApp</a> ()</td></tr>
<tr class="memdesc:a752007f4f4b1f240f9c0877fb1999e7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data to the app via BLE.  <a href="#a752007f4f4b1f240f9c0877fb1999e7e">More...</a><br /></td></tr>
<tr class="separator:a752007f4f4b1f240f9c0877fb1999e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8966364542f53bd7cefbc07cb646234a"><td class="memItemLeft" align="right" valign="top"><a id="a8966364542f53bd7cefbc07cb646234a"></a>
boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a8966364542f53bd7cefbc07cb646234a">testMode</a> = true</td></tr>
<tr class="memdesc:a8966364542f53bd7cefbc07cb646234a"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, print more messages. <br /></td></tr>
<tr class="separator:a8966364542f53bd7cefbc07cb646234a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d71fd2804a6e570e718627de51e2dbb"><td class="memItemLeft" align="right" valign="top"><a id="a2d71fd2804a6e570e718627de51e2dbb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a2d71fd2804a6e570e718627de51e2dbb">sampleNum1</a> = 0</td></tr>
<tr class="memdesc:a2d71fd2804a6e570e718627de51e2dbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample number of channel 1. <br /></td></tr>
<tr class="separator:a2d71fd2804a6e570e718627de51e2dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3f936086a2900e2df11ea748d57c4b"><td class="memItemLeft" align="right" valign="top"><a id="a8b3f936086a2900e2df11ea748d57c4b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a8b3f936086a2900e2df11ea748d57c4b">sampleNum2</a> = 0</td></tr>
<tr class="memdesc:a8b3f936086a2900e2df11ea748d57c4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample number of channel 2. <br /></td></tr>
<tr class="separator:a8b3f936086a2900e2df11ea748d57c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a6a9d6a73aba16cf53f2540c7dbe7f"><td class="memItemLeft" align="right" valign="top"><a id="aa0a6a9d6a73aba16cf53f2540c7dbe7f"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#aa0a6a9d6a73aba16cf53f2540c7dbe7f">arrayTot1</a> = 0</td></tr>
<tr class="memdesc:aa0a6a9d6a73aba16cf53f2540c7dbe7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A running sum of the intensity of channel 1 to be divided by sampleNum1 for averaging. <br /></td></tr>
<tr class="separator:aa0a6a9d6a73aba16cf53f2540c7dbe7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab840871d2722c85dd0a8037edf271e17"><td class="memItemLeft" align="right" valign="top"><a id="ab840871d2722c85dd0a8037edf271e17"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#ab840871d2722c85dd0a8037edf271e17">arrayAvg1</a> = 0</td></tr>
<tr class="memdesc:ab840871d2722c85dd0a8037edf271e17"><td class="mdescLeft">&#160;</td><td class="mdescRight">A running avg of channel 1. <br /></td></tr>
<tr class="separator:ab840871d2722c85dd0a8037edf271e17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab910fbd19bb81b4274d95e0c3cf8d2d"><td class="memItemLeft" align="right" valign="top"><a id="aab910fbd19bb81b4274d95e0c3cf8d2d"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#aab910fbd19bb81b4274d95e0c3cf8d2d">arrayTot2</a> = 0</td></tr>
<tr class="memdesc:aab910fbd19bb81b4274d95e0c3cf8d2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A running sum of the intensity of channel 2 to be divided by sampleNum2 for averaging. <br /></td></tr>
<tr class="separator:aab910fbd19bb81b4274d95e0c3cf8d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbb53c895a2a34e4fbe2cd464c25c801"><td class="memItemLeft" align="right" valign="top"><a id="acbb53c895a2a34e4fbe2cd464c25c801"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#acbb53c895a2a34e4fbe2cd464c25c801">arrayAvg2</a> = 0</td></tr>
<tr class="memdesc:acbb53c895a2a34e4fbe2cd464c25c801"><td class="mdescLeft">&#160;</td><td class="mdescRight">A running avg of channel 2. <br /></td></tr>
<tr class="separator:acbb53c895a2a34e4fbe2cd464c25c801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a803d6b06241ded9831427552153f9201"><td class="memItemLeft" align="right" valign="top"><a id="a803d6b06241ded9831427552153f9201"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a803d6b06241ded9831427552153f9201">sessionCount</a></td></tr>
<tr class="memdesc:a803d6b06241ded9831427552153f9201"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total session count in EEPROM. <br /></td></tr>
<tr class="separator:a803d6b06241ded9831427552153f9201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bfc79870709d14006df2eb36155532"><td class="memItemLeft" align="right" valign="top"><a id="aa2bfc79870709d14006df2eb36155532"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#aa2bfc79870709d14006df2eb36155532">sessionComp</a> = 0</td></tr>
<tr class="memdesc:aa2bfc79870709d14006df2eb36155532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session compliance. <br /></td></tr>
<tr class="separator:aa2bfc79870709d14006df2eb36155532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d4d802477900880df44dd189b7b92e"><td class="memItemLeft" align="right" valign="top"><a id="a07d4d802477900880df44dd189b7b92e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a07d4d802477900880df44dd189b7b92e">ant1</a> = 0</td></tr>
<tr class="memdesc:a07d4d802477900880df44dd189b7b92e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old value is stored to find the vertex. <br /></td></tr>
<tr class="separator:a07d4d802477900880df44dd189b7b92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac512d0df33295e846409ac0812214dd7"><td class="memItemLeft" align="right" valign="top"><a id="ac512d0df33295e846409ac0812214dd7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#ac512d0df33295e846409ac0812214dd7">next1</a> = 0</td></tr>
<tr class="memdesc:ac512d0df33295e846409ac0812214dd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">New value is stored to find the vertex. <br /></td></tr>
<tr class="separator:ac512d0df33295e846409ac0812214dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda812774d5830457137b08a98b6ac61"><td class="memItemLeft" align="right" valign="top"><a id="acda812774d5830457137b08a98b6ac61"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#acda812774d5830457137b08a98b6ac61">maxVal1</a> = 0</td></tr>
<tr class="memdesc:acda812774d5830457137b08a98b6ac61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum value is stored to find the vertex. <br /></td></tr>
<tr class="separator:acda812774d5830457137b08a98b6ac61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab01aec0e5c5f20c12efaa091fde8ecb7"><td class="memItemLeft" align="right" valign="top"><a id="ab01aec0e5c5f20c12efaa091fde8ecb7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#ab01aec0e5c5f20c12efaa091fde8ecb7">ant2</a> = 0</td></tr>
<tr class="memdesc:ab01aec0e5c5f20c12efaa091fde8ecb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old value is stored to find the vertex. <br /></td></tr>
<tr class="separator:ab01aec0e5c5f20c12efaa091fde8ecb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753ca731edc348857cfd4c39f2bfd2a7"><td class="memItemLeft" align="right" valign="top"><a id="a753ca731edc348857cfd4c39f2bfd2a7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a753ca731edc348857cfd4c39f2bfd2a7">next2</a> = 0</td></tr>
<tr class="memdesc:a753ca731edc348857cfd4c39f2bfd2a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">New value is stored to find the vertex. <br /></td></tr>
<tr class="separator:a753ca731edc348857cfd4c39f2bfd2a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96ede0a9e95ff51aaee48b56d0af3490"><td class="memItemLeft" align="right" valign="top"><a id="a96ede0a9e95ff51aaee48b56d0af3490"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a96ede0a9e95ff51aaee48b56d0af3490">maxVal2</a> = 0</td></tr>
<tr class="memdesc:a96ede0a9e95ff51aaee48b56d0af3490"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum value is stored to find the vertex. <br /></td></tr>
<tr class="separator:a96ede0a9e95ff51aaee48b56d0af3490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad9aa3998cae3413fd994c2d26d4e98"><td class="memItemLeft" align="right" valign="top"><a id="a9ad9aa3998cae3413fd994c2d26d4e98"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a9ad9aa3998cae3413fd994c2d26d4e98">sendFlag</a> = false</td></tr>
<tr class="memdesc:a9ad9aa3998cae3413fd994c2d26d4e98"><td class="mdescLeft">&#160;</td><td class="mdescRight">If blend has sent data to the app, the sendFlag is set to true. <br /></td></tr>
<tr class="separator:a9ad9aa3998cae3413fd994c2d26d4e98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3668a26ea96075b554b79c85b71a9703"><td class="memItemLeft" align="right" valign="top"><a id="a3668a26ea96075b554b79c85b71a9703"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a3668a26ea96075b554b79c85b71a9703">startFlag</a> = false</td></tr>
<tr class="memdesc:a3668a26ea96075b554b79c85b71a9703"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a session starts, the startFlag is set to true. <br /></td></tr>
<tr class="separator:a3668a26ea96075b554b79c85b71a9703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad49a66e91d8658c5f1f7dbcbcbbd2f"><td class="memItemLeft" align="right" valign="top"><a id="a8ad49a66e91d8658c5f1f7dbcbcbbd2f"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a8ad49a66e91d8658c5f1f7dbcbcbbd2f">startTime</a></td></tr>
<tr class="memdesc:a8ad49a66e91d8658c5f1f7dbcbcbbd2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the start time before a session starts. <br /></td></tr>
<tr class="separator:a8ad49a66e91d8658c5f1f7dbcbcbbd2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22ab9604e2a95f2750f1418182f6ec4a"><td class="memItemLeft" align="right" valign="top"><a id="a22ab9604e2a95f2750f1418182f6ec4a"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a22ab9604e2a95f2750f1418182f6ec4a">endTime</a></td></tr>
<tr class="memdesc:a22ab9604e2a95f2750f1418182f6ec4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the time when writing data to EEPROM. <br /></td></tr>
<tr class="separator:a22ab9604e2a95f2750f1418182f6ec4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac023874b2154eac7297a7575008605fe"><td class="memItemLeft" align="right" valign="top"><a id="ac023874b2154eac7297a7575008605fe"></a>
DateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#ac023874b2154eac7297a7575008605fe">now</a></td></tr>
<tr class="memdesc:ac023874b2154eac7297a7575008605fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current time. <br /></td></tr>
<tr class="separator:ac023874b2154eac7297a7575008605fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7715afc6e8732f6f936183f5c0d76167"><td class="memItemLeft" align="right" valign="top"><a id="a7715afc6e8732f6f936183f5c0d76167"></a>
RTC_DS1307&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_arduino_8ino.html#a7715afc6e8732f6f936183f5c0d76167">rtc</a></td></tr>
<tr class="memdesc:a7715afc6e8732f6f936183f5c0d76167"><td class="mdescLeft">&#160;</td><td class="mdescRight">Real time clock. <br /></td></tr>
<tr class="separator:a7715afc6e8732f6f936183f5c0d76167"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">The code for the Blend Arduino that will be uploaded to the board on the NMES machine. </p>
<p class="">The Arduino script was written by the SEED team and named as MasterV1 for the actual prototype that they created. It has then been modified by Chia-Chun Chao, Yifan Zhang, and Xavier Stevens beyond that. <a class="el" href="_arduino_8ino.html" title="The code for the Blend Arduino that will be uploaded to the board on the NMES machine. ">Arduino.ino</a> now tracks time, has clearer and more useful BLE usage and can transfer data from the NMES-&gt;Blend Board-&gt;App, fixed the data pull so now there is no need for an off-app button for the sync, the intensity values have been completely overhauled, and multiple sessions can now be stored within the EEPROM just incase the user doesn't have internet</p>
<p class="">The code on Github is <a href="https://github.com/timstevens1/Rehab-Tracker/blob/master/Hardware/Arduino/Arduino.ino">here</a>. </p>

<p class="definition">Definition in file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1c6f602edd594562f9cb1605df25d53f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6f602edd594562f9cb1605df25d53f">&#9670;&nbsp;</a></span>ArrayAdd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArrayAdd </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>intensityValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sum up all intensities, calculate the average intensity, and calculate the session compliance. </p>
<p class="">This function is called when a vertex of input intensity data is found</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intensityValue</td><td>The intensity value of a vertex </td></tr>
    <tr><td class="paramname">channel</td><td>The channel number </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00496">496</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
<a id="a52573902bb826815aa77a3d47254c860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52573902bb826815aa77a3d47254c860">&#9670;&nbsp;</a></span>ButtonInterrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ButtonInterrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if BLE is connected. </p>
<p class="">Check if BLE is connected. If true, call <a class="el" href="_arduino_8ino.html#a752007f4f4b1f240f9c0877fb1999e7e" title="Send data to the app via BLE. ">outputtingToApp()</a> and send data to the app. After sending data, disconnect BLE to make sure the next successful connection. This function is frequently called to check if a user has pressed the sync button </p>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00390">390</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
<a id="a25a40b6614565f755233080a384c35f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25a40b6614565f755233080a384c35f1">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize all global variables related to a session. </p>
<p class="">This function is called when a session has finished or a session has been dumped. All global variables related to a session are initialized. </p>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00271">271</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
<a id="a992780a393bb17ed9c6f96a1822808fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a992780a393bb17ed9c6f96a1822808fa">&#9670;&nbsp;</a></span>IntensityMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float IntensityMap </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sensorValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the intensity based on the sensor value and return the intensity. </p>
<p class="">This function is called when a vertex is found. The value of intensity is about one tenth of a sensor value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensorValue</td><td>The voltage value from a sensor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the intensity value mapping to the input sensor value </dd></dl>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00536">536</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loop consecutively, allowing the program to change and respond. </p>
<p class="">Every program contains a setup function and a loop function After creating a <a class="el" href="_arduino_8ino.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialize and set the initial values. ">setup()</a> function, which initializes and sets the initial values, the <a class="el" href="_arduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="Loop consecutively, allowing the program to change and respond. ">loop()</a> function does precisely what its name suggests, and loops consecutively, allowing your program to change and respond. Use it to actively control the Arduino board. </p>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00118">118</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
<a id="a752007f4f4b1f240f9c0877fb1999e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a752007f4f4b1f240f9c0877fb1999e7e">&#9670;&nbsp;</a></span>outputtingToApp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void outputtingToApp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data to the app via BLE. </p>
<p class="">This function is called by <a class="el" href="_arduino_8ino.html#a52573902bb826815aa77a3d47254c860" title="Check if BLE is connected. ">ButtonInterrupt()</a> when BLE is connected and user has pressed the sync button in the app. The data in EEPROM are read and transformed to a format that can be passed to ble_write_bytes(). The sent data include an 'x' in the end to inform the app that all data have been sent </p>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00306">306</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize and set the initial values. </p>
<p class="">Every Arduino program contains a setup function and a loop function. The <a class="el" href="_arduino_8ino.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialize and set the initial values. ">setup()</a> function is called when a sketch starts. Use it to initialize variables, pin modes, start using libraries, etc. The <a class="el" href="_arduino_8ino.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialize and set the initial values. ">setup()</a> function will only run once, after each powerup or reset of the Arduino board. </p>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00071">71</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
<a id="ae938d2541a15a3cec4e6c47b92795112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae938d2541a15a3cec4e6c47b92795112">&#9670;&nbsp;</a></span>WriteStorage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WriteStorage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data to EEPROM. </p>
<p class="">When session count is 9, 19, 29, ..., 89, store data in EEPROM. The data include sessionCount, arrayAvg1, arrayAvg2, sessionComp, startTime, and endTime. </p>

<p class="definition">Definition at line <a class="el" href="_arduino_8ino_source.html#l00428">428</a> of file <a class="el" href="_arduino_8ino_source.html">Arduino.ino</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
